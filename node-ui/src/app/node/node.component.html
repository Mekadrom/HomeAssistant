<div class="left-blade">
  <h1 class="blade-header">Node Command Center</h1>
  <div class="left-fill-container">
    <input class="searchbar left-fill" (keypress)="omitSpecialChar($event)" [(ngModel)]="nodeNameSearchTerm" (ngModelChange)="filter()"/>
    <div class="right-fixed">
      <mat-form-field class="room-selection">
        <mat-select [(ngModel)]="roomNameSearchTerm" (ngModelChange)="filter()">
          <mat-option value=""></mat-option>
          <mat-option *ngFor="let room of rooms" [value]="room.name">{{ room.name }}</mat-option>
        </mat-select>
      </mat-form-field>
      <button mat-flat-button (click)="clearAndRefresh()" class="mdc-icon-button">
        <span class="material-icons">close</span>
      </button>
      <button mat-flat-button (click)="refresh()" class="mdc-icon-button">
        <span class="material-icons">refresh</span>
      </button>
    </div>
  </div>
  <div style="width:100%;height:100%;">
    <div class="spinner-container">
      <mat-spinner *ngIf="loading && !failedToLoad" class="loading-spinner"></mat-spinner>
      <h3 *ngIf="failedToLoad">Failed to load.</h3>
    </div>
    <mat-action-list *ngIf="!loading">
      <button mat-flat-button class="list-item" *ngFor="let node of filteredNodes" (click)="setSelectedNode(node)">
        <span style="text-align:left;float:left;">{{ node.name }}</span><span style="text-align:right;float:right;">{{ node.room?.name }}</span>
      </button>
    </mat-action-list>
  </div>
</div>
<div class="right-blade">
  <div style="height:100%;" *ngIf="selectedNode != null">
    <app-node-action style="height:100%;" [setNode]="getSelectedNode()"></app-node-action>
  </div>
  <div class="bottom-button-div">
    <div style="width:100%;">
      <button mat-flat-button
              (click)="reset()"
              style="float:right;"
              class="mdc-icon-button text-button vertical-center">
        <span class="material-icons" style="padding-right:5px;">cached</span><span>Reset</span>
      </button>
      <button mat-flat-button
              [disabled]="!saveEnabled()"
              [ngClass]="{'disabled': !saveEnabled()}"
              (click)="save()"
              style="float:right;"
              class="mdc-icon-button text-button vertical-center">
        <span class="material-icons" style="padding-right:5px;">done</span><span>Save</span>
      </button>
    </div>
  </div>
</div>
